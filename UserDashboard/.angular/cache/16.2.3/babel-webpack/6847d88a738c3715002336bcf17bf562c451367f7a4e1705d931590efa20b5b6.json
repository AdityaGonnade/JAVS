{"ast":null,"code":"var _class;\nimport { map } from 'rxjs';\nimport { productPost } from './header/Product.model';\nimport { reviewGet } from './header/Review.module';\nimport { cartPost } from './header/Cart.module';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class EcommServiceService {\n  constructor(http) {\n    this.http = http;\n    // searchForm!: FormGroup;\n    this.recieved_product = [];\n    this.product_rating = 0;\n    this.dummy_imgs = [\"img4.jpg\", \"img5.jpg\", \"img6.jpg\", \"img9.jpg\", \"img8.jpg\", \"img7.jpg\"];\n    this.product_reviews = [];\n  }\n  onSearch(searchForm) {\n    console.log(searchForm.value);\n    this.recieved_product = [];\n    this.http.post('https://localhost:7221/ProductFetchingProduct/SearchProduct', searchForm.value).pipe(map(responseData => {\n      const postArray = [];\n      for (const key in responseData) {\n        if (responseData.hasOwnProperty(key)) {\n          postArray.push({\n            ...responseData[key],\n            searchQuery: key\n          });\n        }\n      }\n      return postArray;\n    })).subscribe(response => {\n      console.log(\"Recieved\");\n      for (const items of response) {\n        console.log(items);\n        this.recieved_product.push(items);\n      }\n    });\n  }\n  onGetProductDummy(seller_id, product_name) {\n    this.individual_pdt_details = null;\n    this.product_reviews = [];\n    this.product_rating = 0;\n    console.log(\"hi\", seller_id);\n    const pdt_url = \"https://localhost:7221/ProductFetchingProduct/\" + product_name + \"/\" + seller_id;\n    this.http.post(pdt_url, {}).subscribe(response => {\n      console.log(\"Product Response---\");\n      console.log(response);\n      console.log(\"inside pdt\");\n      this.individual_pdt_details = new productPost();\n      this.individual_pdt_details.id = response.id;\n      this.individual_pdt_details.sellerId = response.sellerId;\n      this.individual_pdt_details.productName = response.productName;\n      this.individual_pdt_details.description = response.description;\n      this.individual_pdt_details.imagesURL = response.imagesURL;\n      this.individual_pdt_details.price = response.price;\n      this.individual_pdt_details.category = response.category;\n      console.log(this.individual_pdt_details);\n    });\n    const review_url = \"https://localhost:7221/BuyerReview/\" + product_name;\n    this.http.get(review_url).subscribe(response => {\n      console.log(\"Review Response---\");\n      for (const items in response.review) {\n        let review_list = new reviewGet();\n        review_list.BuyerId = response.review[items].buyerId, review_list.Description = response.review[items].description, review_list.Rating = response.review[items].rating, review_list.ImageURL = response.review[items].imageURL, console.log(\"Review List\");\n        console.log(review_list);\n        this.product_reviews.push(review_list);\n      }\n      this.product_rating = response.avgRating;\n      console.log(this.product_rating);\n    });\n  }\n  updateCart() {\n    let mycart = new cartPost();\n    mycart.sellerId = this.individual_pdt_details.seller_id;\n    mycart.productName = this.individual_pdt_details.productName;\n    mycart.buyerId = \"12\";\n    mycart.quantity = 1;\n    console.log(\"h1111\");\n    const pdt_url = \"https://localhost:7221/BuyerCart\";\n    this.http.post(pdt_url, {\n      \"sellerId\": this.individual_pdt_details.seller_id.value,\n      \"productName\": this.individual_pdt_details.productName.v,\n      \"buyerId\": \"3\",\n      \"quantity\": 5\n    }).subscribe(response => {\n      console.log(\"Cart Response---\");\n      console.log(response);\n    });\n  }\n  // Vendors functions\n  onSubmitProduct() {}\n  onSubmitImage() {}\n}\n_class = EcommServiceService;\n_class.ɵfac = function EcommServiceService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["map","productPost","reviewGet","cartPost","EcommServiceService","constructor","http","recieved_product","product_rating","dummy_imgs","product_reviews","onSearch","searchForm","console","log","value","post","pipe","responseData","postArray","key","hasOwnProperty","push","searchQuery","subscribe","response","items","onGetProductDummy","seller_id","product_name","individual_pdt_details","pdt_url","id","sellerId","productName","description","imagesURL","price","category","review_url","get","review","review_list","BuyerId","buyerId","Description","Rating","rating","ImageURL","imageURL","avgRating","updateCart","mycart","quantity","v","onSubmitProduct","onSubmitImage","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/Users/vishal.mishra/Desktop/JAVS/UserDashboardUI/UserDashboard/src/app/ecomm-service.service.ts"],"sourcesContent":["import { Injectable, OnInit } from '@angular/core';\nimport { map } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { searchPost } from './header/Search.model';\nimport { productPost } from './header/Product.model';\nimport { reviewGet } from './header/Review.module';\nimport { cartPost } from './header/Cart.module';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EcommServiceService {\n\n  \n  // searchForm!: FormGroup;\n  recieved_product:any[]=[];\n  product_rating=0;\n  dummy_imgs=[ \"img4.jpg\",\"img5.jpg\",\"img6.jpg\",\"img9.jpg\",\"img8.jpg\",\"img7.jpg\"];\n\n  product_reviews:reviewGet[]=[];\n\n  individual_pdt_details:any;\n\n  constructor(private http:HttpClient) {\n   \n  }\n  \n  \n\n\n  onSearch(searchForm:FormGroup){\n    console.log(searchForm.value);\n    this.recieved_product=[];\n    this.http.post< {[key:string] :searchPost}>(\n      \n      'https://localhost:7221/ProductFetchingProduct/SearchProduct', searchForm.value,\n    ).pipe( map(responseData => {\n      const postArray:searchPost[] =[];\n      for (const key in responseData){\n        if(responseData.hasOwnProperty(key)){\n          postArray.push({...responseData[key],searchQuery:key});\n        }\n      }\n      return postArray;\n    \n    })\n      )\n    \n    .subscribe(response=>{\n      console.log(\"Recieved\");\n      for(const items of response){\n        console.log(items);\n        \n        this.recieved_product.push(items);\n\n        \n      }\n    });\n\n    \n\n    \n  }\n\n\n\n  onGetProductDummy(seller_id:string, product_name:string){\n    this.individual_pdt_details=null;\n    this.product_reviews=[];\n    this.product_rating=0;\n\n    console.log(\"hi\",seller_id);\n    const pdt_url = \"https://localhost:7221/ProductFetchingProduct/\"+product_name+\"/\"+seller_id;\n    \n    this.http.post<any>(\n      pdt_url,\n      {},\n   \n    )\n    .subscribe(response=>{\n      console.log(\"Product Response---\");\n      console.log(response);\n      console.log(\"inside pdt\");\n      \n      this.individual_pdt_details = new productPost();\n      this.individual_pdt_details.id = response.id;\n      this.individual_pdt_details.sellerId = response.sellerId;\n      this.individual_pdt_details.productName = response.productName;\n      this.individual_pdt_details.description = response.description;\n      this.individual_pdt_details.imagesURL = response.imagesURL;\n      this.individual_pdt_details.price = response.price;\n      this.individual_pdt_details.category = response.category;\n      console.log(this.individual_pdt_details);\n    });\n\n  \n      const review_url = \"https://localhost:7221/BuyerReview/\"+product_name;  \n    this.http.get<any>(\n      review_url,\n      \n    )\n    .subscribe(response=>{\n      console.log(\"Review Response---\");\n\n      for(const items in response.review){\n        let review_list = new reviewGet();\n        \n          review_list.BuyerId = response.review[items].buyerId,\n          review_list.Description = response.review[items].description,\n          review_list.Rating = response.review[items].rating,\n          review_list.ImageURL = response.review[items].imageURL,\n        \n          console.log(\"Review List\");\n        console.log(review_list);\n        this.product_reviews.push(review_list);\n\n      }\n      this.product_rating=response.avgRating;\n      console.log(this.product_rating);\n    });\n\n \n    \n    \n  }\n\n\n  updateCart(){\n    let mycart:cartPost = new cartPost();\n    mycart.sellerId=this.individual_pdt_details.seller_id;\n    mycart.productName = this.individual_pdt_details.productName;\n    mycart.buyerId = \"12\";\n    mycart.quantity = 1;\n    \n    console.log(\"h1111\");\n\n    const pdt_url = \"https://localhost:7221/BuyerCart\"\n\n\n    this.http.post<any>(\n      pdt_url,\n      {\n        \"sellerId\":this.individual_pdt_details.seller_id.value,\n        \"productName\":this.individual_pdt_details.productName.v,\n        \"buyerId\":\"3\",\n        \"quantity\":5\n      },\n   \n    )\n    .subscribe(response=>{\n      console.log(\"Cart Response---\");\n      console.log(response);\n    });\n\n    \n  }\n\n\n// Vendors functions\n  onSubmitProduct(){\n\n  }\n\n  onSubmitImage(){\n\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}